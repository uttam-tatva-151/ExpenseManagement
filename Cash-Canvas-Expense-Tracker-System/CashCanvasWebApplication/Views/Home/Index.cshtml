@{
    ViewData["Title"] = "Dashboard";
    Layout = "_Layout";
}

<!--begin::App Content Header-->
<div class="app-content-header">
    <!--begin::Container-->
    <div class="container-fluid">
        <!--begin::Row-->
        <div class="row">
            <div class="col-sm-6">
                <h3 class="mb-0">@ViewData["Title"]</h3>
            </div>
        </div>
        <!--end::Row-->
    </div>
    <!--end::Container-->
</div>
<!--end::App Content Header-->
<!--begin::App Content-->
<div class="app-content">
    <!--begin::Container-->
    <div class="container-fluid">
        <div class="row">
            <div class="row col-8">
                <!--begin::Col-->
                <div class="col-6">
                    <!--begin::Small Box Widget 1-->
                    <div class="small-box text-bg-primary">
                        <div class="inner text-center text-md-start">
                            <h4 class="fs-5 tooltip-custom text-ellipsis"
                                data-tooltip="Define and track your monthly budget to control expenses.">Set Budget</h4>
                        </div>
                        <div class="small-box-icon">
                            <i class="bi bi-wallet2"></i>
                        </div>
                        <a href="#"
                            class="small-box-footer link-light link-underline-opacity-0 link-underline-opacity-50-hover">
                            More info <i class="bi bi-link-45deg"></i>
                        </a>
                    </div>
                    <!--end::Small Box Widget 1-->
                </div>
                <!--end::Col-->
                <div class="col-6">
                    <!--begin::Small Box Widget 2-->
                    <div class="small-box text-bg-success">
                        <div class="inner text-center text-md-start">
                            <h4 class="fs-5 tooltip-custom text-ellipsis"
                                data-tooltip="View detailed financial reports and insights.">View Reports</h4>
                        </div>
                        <div class="small-box-icon ">
                            <i class="bi bi-file-earmark-richtext"></i>
                        </div>
                        <a href="#"
                            class="small-box-footer link-light link-underline-opacity-0 link-underline-opacity-50-hover">
                            More info <i class="bi bi-link-45deg"></i>
                        </a>
                    </div>
                    <!--end::Small Box Widget 2-->
                </div>
                <!--end::Col-->
                <div class="col-6">
                    <!--begin::Small Box Widget 3-->
                    <div class="small-box text-bg-warning">
                        <div class="inner text-center text-md-start">
                            <h4 class="fs-5 tooltip-custom text-ellipsis"
                                data-tooltip="Easily add and manage your recurring bills and payments.">Add Bills</h4>
                        </div>
                        <div class="small-box-icon">
                            <i class="bi bi-receipt"></i>
                        </div>
                        <a asp-action="CreateBill" asp-controller="Bill"
                            class="small-box-footer link-dark link-underline-opacity-0 link-underline-opacity-50-hover">
                            More info <i class="bi bi-link-45deg"></i>
                        </a>
                    </div>
                    <!--end::Small Box Widget 3-->
                </div>
                <!--end::Col-->
                <div class="col-6">
                    <!--begin::Small Box Widget 4-->
                    <div class="small-box text-bg-danger">
                        <div class="inner text-center text-md-start">
                            <h4 class="fs-5 tooltip-custom text-ellipsis"
                                data-tooltip="Record your daily transactions to monitor cash flow effectively."> Add
                                Transactions</h4>
                        </div>
                        <div class="small-box-icon">
                            <i class="bi bi-cash-stack"></i>
                        </div>
                        <a asp-action="AddTransaction" asp-controller="Transaction"
                            class="small-box-footer link-light link-underline-opacity-0 link-underline-opacity-50-hover">
                            More info <i class="bi bi-link-45deg"></i>
                        </a>
                    </div>
                    <!--end::Small Box Widget 4-->
                </div>
            </div>
            <div class="col-4">
                <!--begin::Financial Summary Card-->
                <div class="card text-bg-light mb-4">
                    <div class="card-header bg-primary text-white">
                        <h4 class="card-title mb-0 text-center text-md-start">Financial Summary</h4>
                    </div>
                    <div class="card-body">
                        <ul class="list-group list-group-flush">
                            <li
                                class="list-group-item d-flex flex-column flex-md-row justify-content-between align-items-center">
                                <span>Total Income</span>
                                <span class="badge bg-success fs-6">$10,000</span>
                            </li>
                            <li
                                class="list-group-item d-flex flex-column flex-md-row justify-content-between align-items-center">
                                <span>Total Expense</span>
                                <span class="badge bg-danger fs-6">$4,500</span>
                            </li>
                            <li
                                class="list-group-item d-flex flex-column flex-md-row justify-content-between align-items-center">
                                <span>Balance</span>
                                <span class="badge bg-warning fs-6">$5,500</span>
                            </li>
                        </ul>
                    </div>
                </div>
                <!--end::Financial Summary Card-->
            </div>
            <!--end::Col-->
        </div>
        <div class="row">
            <div class="container-fluid">
                <div class="row g-3">
                    <!-- Card 1: Sales Value -->
                    <div class="col-12 col-lg-6" id="card-sales-value">
                        <div class="card h-100">
                            <div class="card-header d-flex justify-content-between align-items-center">
                                <h3 class="card-title mb-0">Sales Value</h3>
                                <button class="btn btn-tool" type="button" data-bs-toggle="collapse"
                                    data-bs-target="#collapseSalesValue" aria-expanded="true"
                                    aria-controls="collapseSalesValue">
                                    <i class="bi bi-arrows-angle-expand"></i>
                                </button>
                            </div>
                            <div class="collapse show" id="collapseSalesValue">
                                <div class="card-body">
                                    <div id="revenue-chart"></div>
                                </div>
                            </div>
                        </div>
                    </div>
                    <!-- Card 2: Browser Usage -->
                    <div class="col-12 col-lg-6" id="card-browser-usage">
                        <div class="card h-100">
                            <div class="card-header d-flex justify-content-between align-items-center">
                                <h3 class="card-title mb-0">Browser Usage</h3>
                                <button class="btn btn-tool" type="button" data-bs-toggle="collapse"
                                    data-bs-target="#collapseBrowserUsage" aria-expanded="true"
                                    aria-controls="collapseBrowserUsage">
                                    <i class="bi bi-arrows-angle-expand"></i>
                                </button>
                            </div>
                            <div class="collapse show" id="collapseBrowserUsage">
                                <div class="card-body">
                                    <div id="pie-chart"></div>
                                </div>
                            </div>
                        </div>
                    </div>
                    <!-- Card 3: Recent Expenses -->
                    <div class="col-12 col-lg-6" id="card-recent-expenses">
                        <div class="card h-100">
                            <div class="card-header d-flex justify-content-between align-items-center">
                                <h3 class="card-title mb-0">Recent Expenses</h3>
                                <button class="btn btn-tool" type="button" data-bs-toggle="collapse"
                                    data-bs-target="#collapseRecentExpenses" aria-expanded="true"
                                    aria-controls="collapseRecentExpenses">
                                    <i class="bi bi-arrows-angle-expand"></i>
                                </button>
                            </div>
                            <div class="collapse show" id="collapseRecentExpenses">
                                <div class="card-body p-0">
                                    <div class="px-2">
                                        <div class="d-flex border-top py-2 px-1 flip-row" onclick="flipRow(this)">
                                            <div class="col-2">
                                                <img src="~/assets/images/expense.png" alt="Electricity Icon" class="img-size-50" />
                                            </div>
                                            <div class="col-10">
                                                <a href="javascript:void(0)" class="fw-bold">
                                                    Food
                                                    <span class="badge text-bg-warning float-end"> $50 </span>
                                                </a>
                                                <div class="text-truncate">2025-06-10</div>
                                            </div>
                                            <div class="flip-back">
                                                <div class="row-content">
                                                    <span>Lunch at a restaurant with friends at XYZ Cafe.</span>
                                                </div>
                                            </div>
                                        </div>
                                        <!-- /.item -->
                                        <div class="d-flex border-top py-2 px-1 flip-row" onclick="flipRow(this)">
                                            <div class="col-2">
                                                <img src="~/assets/images/expense.png" alt="Electricity Icon" class="img-size-50" />
                                            </div>
                                            <div class="col-10">
                                                <a href="javascript:void(0)" class="fw-bold">
                                                    Transport
                                                    <span class="badge text-bg-info float-end"> $120 </span>
                                                </a>
                                                <div class="text-truncate">2025-06-09</div>
                                            </div>
                                            <div class="flip-back">
                                                <div class="row-content">
                                                    <span>Purchased a monthly metro pass for commuting.</span>
                                                </div>
                                            </div>
                                        </div>
                                        <!-- /.item -->
                                    </div>
                                </div>
                                <div class="card-footer text-center">
                                    <a href="javascript:void(0)" class="uppercase"> View All Expenses </a>
                                </div>
                            </div>
                        </div>
                    </div>
                    <!-- Card 4: Upcoming Bills -->
                    <div class="col-12 col-lg-6" id="card-upcoming-bills">
                        <div class="card h-100">
                            <div class="card-header d-flex justify-content-between align-items-center">
                                <h3 class="card-title mb-0">Upcoming Bills</h3>
                                <button class="btn btn-tool" type="button" data-bs-toggle="collapse"
                                    data-bs-target="#collapseUpcomingBills" aria-expanded="true"
                                    aria-controls="collapseUpcomingBills">
                                    <i class="bi bi-arrows-angle-expand"></i>
                                </button>
                            </div>
                            <div class="collapse show" id="collapseUpcomingBills">
                                <div class="card-body p-0">
                                    <div class="px-2">
                                        <div class="d-flex border-top py-2 px-1 flip-row" onclick="flipRow(this)">
                                            <div class="col-2"> 
                                                
                                                <img src="~/assets/images/bill.png" alt="Electricity Icon" class="img-size-50" />
                                            </div>
                                            <div class="col-10">
                                                <a href="javascript:void(0)" class="fw-bold">
                                                    Electricity
                                                    <span class="badge text-bg-danger float-end"> $100 </span>
                                                </a>
                                                <div class="text-truncate">2025-06-15</div>
                                            </div>
                                            <div class="flip-back">
                                                <div class="row-content">
                                                    <span>Electricity bill for the month of June.</span>
                                                </div>
                                            </div>
                                        </div>
                                        <!-- /.item -->
                                        <div class="d-flex border-top py-2 px-1 flip-row" onclick="flipRow(this)">
                                            <div class="col-2">
                                                <img src="~/assets/images/bill.png" alt="Electricity Icon" class="img-size-50" />
                                            </div>
                                            <div class="col-10">
                                                <a href="javascript:void(0)" class="fw-bold">
                                                    Internet
                                                    <span class="badge text-bg-success float-end"> $50 </span>
                                                </a>
                                                <div class="text-truncate">2025-06-20</div>
                                            </div>
                                            <div class="flip-back">
                                                <div class="row-content">
                                                    <span>Monthly broadband subscription for high-speed internet.</span>
                                                </div>
                                            </div>
                                        </div>
                                        <!-- /.item -->
                                    </div>
                                </div>
                                <div class="card-footer text-center">
                                    <a href="javascript:void(0)" class="uppercase"> View All Bills </a>
                                </div>
                            </div>
                        </div>
                    </div>
                </div>
            </div>
        </div>
        <!--end::Container-->
    </div>
    <!--end::App Content-->
    <style>

        /* Flip container */
        .flip-container {
            perspective: 1000px;
            /* Enable 3D perspective */
            width: 100%;
            height: 100%;
            position: relative;
        }

        /* Flip card */
        .flip-card {
            width: 100%;
            height: 100%;
            position: relative;
            transform-style: preserve-3d;
            transition: transform 0.6s ease;
        }

        /* Front side of the card */
        .flip-front,
        .flip-back {
            backface-visibility: hidden;
            position: absolute;
            top: 0;
            left: 0;
            width: 100%;
            height: 100%;
            display: flex;
            align-items: center;
            justify-content: space-between;
            padding: 10px;
            box-sizing: border-box;
        }

        /* Front side */
        .flip-front {
            background-color: #f8f9fa;
            /* Light background */
            color: #212529;
            /* Dark text */
        }

        /* Back side */
        .flip-back {
            background-color: #1e293b;
            /* Dark background */
            color: #ffffff;
            /* Light text */
            transform: rotateX(180deg);
            /* Rotate vertically */
            justify-content: center;
            text-align: center;
        }

        /* Flip the card vertically */
        .flip-container.flipped .flip-card {
            transform: rotateX(180deg);
            /* Rotate vertically */
        }

        /* Row content styling */
        .row-content {
            display: flex;
            justify-content: space-between;
            width: 100%;
        }
    </style>
@section Scripts {
        <!-- sortablejs -->
        <script src="https://cdn.jsdelivr.net/npm/sortablejs@1.15.0/Sortable.min.js"
            integrity="sha256-ipiJrswvAR4VAx/th+6zWsdeYmVae0iJuiR+6OqHJHQ=" crossorigin="anonymous"></script>
        <script>
            function flipRow(row) {
                const flipContainer = row.querySelector('.flip-container');
                flipContainer.classList.toggle('flipped');
            }
            const connectedSortables = document.querySelectorAll('.connectedSortable');
            connectedSortables.forEach((connectedSortable) => {
                let sortable = new Sortable(connectedSortable, {
                    group: 'shared',
                    handle: '.card-header',
                });
            });

            const cardHeaders = document.querySelectorAll('.connectedSortable .card-header');
            cardHeaders.forEach((cardHeader) => {
                cardHeader.style.cursor = 'move';
            });
        </script>

        <!-- ChartJS -->
        <script>
            // NOTICE!! DO NOT USE ANY OF THIS JAVASCRIPT
            // IT'S ALL JUST JUNK FOR DEMO
            // ++++++++++++++++++++++++++++++++++++++++++

            const sales_chart_options = {
                series: [
                    {
                        name: 'Digital Goods',
                        data: [28, 48, 40, 19, 86, 27, 90],
                    },
                    {
                        name: 'Electronics',
                        data: [65, 59, 80, 81, 56, 55, 40],
                    },
                ],
                chart: {
                    height: 300,
                    type: 'area',
                    toolbar: {
                        show: false,
                    },
                },
                legend: {
                    show: false,
                },
                colors: ['#0d6efd', '#20c997'],
                dataLabels: {
                    enabled: false,
                },
                stroke: {
                    curve: 'smooth',
                },
                xaxis: {
                    type: 'datetime',
                    categories: [
                        '2023-01-01',
                        '2023-02-01',
                        '2023-03-01',
                        '2023-04-01',
                        '2023-05-01',
                        '2023-06-01',
                        '2023-07-01',
                    ],
                },
                tooltip: {
                    x: {
                        format: 'MMMM yyyy',
                    },
                },
            };

            const sales_chart = new ApexCharts(
                document.querySelector('#revenue-chart'),
                sales_chart_options
            );
            sales_chart.render();

            const visitorsData = {
                US: 398, // USA
                SA: 400, // Saudi Arabia
                CA: 1000, // Canada
                DE: 500, // Germany
                FR: 760, // France
                CN: 300, // China
                AU: 700, // Australia
                BR: 600, // Brazil
                IN: 800, // India
                GB: 320, // Great Britain
                RU: 3000, // Russia
            };

            // World map by jsVectorMap
            const map = new jsVectorMap({
                selector: '#world-map',
                map: 'world',
            });

            // Sparkline charts
            const option_sparkline1 = {
                series: [
                    {
                        data: [1000, 1200, 920, 927, 931, 1027, 819, 930, 1021],
                    },
                ],
                chart: {
                    type: 'area',
                    height: 50,
                    sparkline: {
                        enabled: true,
                    },
                },
                stroke: {
                    curve: 'straight',
                },
                fill: {
                    opacity: 0.3,
                },
                yaxis: {
                    min: 0,
                },
                colors: ['#DCE6EC'],
            };

            const sparkline1 = new ApexCharts(document.querySelector('#sparkline-1'), option_sparkline1);
            sparkline1.render();

            const option_sparkline2 = {
                series: [
                    {
                        data: [515, 519, 520, 522, 652, 810, 370, 627, 319, 630, 921],
                    },
                ],
                chart: {
                    type: 'area',
                    height: 50,
                    sparkline: {
                        enabled: true,
                    },
                },
                stroke: {
                    curve: 'straight',
                },
                fill: {
                    opacity: 0.3,
                },
                yaxis: {
                    min: 0,
                },
                colors: ['#DCE6EC'],
            };

            const sparkline2 = new ApexCharts(document.querySelector('#sparkline-2'), option_sparkline2);
            sparkline2.render();

            const option_sparkline3 = {
                series: [
                    {
                        data: [15, 19, 20, 22, 33, 27, 31, 27, 19, 30, 21],
                    },
                ],
                chart: {
                    type: 'area',
                    height: 50,
                    sparkline: {
                        enabled: true,
                    },
                },
                stroke: {
                    curve: 'straight',
                },
                fill: {
                    opacity: 0.3,
                },
                yaxis: {
                    min: 0,
                },
                colors: ['#DCE6EC'],
            };

            const sparkline3 = new ApexCharts(document.querySelector('#sparkline-3'), option_sparkline3);
            sparkline3.render();
        </script>
}